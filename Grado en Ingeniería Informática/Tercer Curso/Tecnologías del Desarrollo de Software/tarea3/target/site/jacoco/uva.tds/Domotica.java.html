<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Domotica.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">demo</a> &gt; <a href="index.source.html" class="el_package">uva.tds</a> &gt; <span class="el_source">Domotica.java</span></div><h1>Domotica.java</h1><pre class="source lang-java linenums">package uva.tds;

/**
 * Aplicación que permite controlar el encendido y apagado de las luces de una
 * casa utilizando un servicio externo para realizar las operaciones. Por
 * defecto,
 * las luces están apagadas.
 * 
 * @author marcorr
 *
 */
public class Domotica {

	private DomoticaService domService;

	/**
	 * Crea un gestor de domótica de una casa que se comunica con un servicio
	 * externo
	 * 
	 * @param domService El servicio de domotica
	 * @throws IllegalArgumentException si domService es nulo
	 */
<span class="fc" id="L23">	public Domotica(DomoticaService domService) {</span>
<span class="fc bfc" id="L24" title="All 2 branches covered.">		if (domService == null) {</span>
<span class="fc" id="L25">			throw new IllegalArgumentException();</span>
		}
<span class="fc" id="L27">		this.domService = domService;</span>
<span class="fc" id="L28">	}</span>

	/**
	 * Devuelve el servicio de domótica
	 * 
	 * @return El servicio de domótica
	 */
	public DomoticaService getDomoticaService() {
<span class="fc" id="L36">		return this.domService;</span>
	}

	/**
	 * Inicializa el servicio de domótica habilitando dicho servicio
	 * 
	 * @throws IllegalStateException si domService es nulo
	 */
	public void init() {
<span class="fc" id="L45">		isNull(this.domService);</span>
<span class="fc" id="L46">		this.domService.setAvailable(true);</span>
<span class="fc" id="L47">	}</span>

	/**
	 * Indica si el servicio está disponible
	 * 
	 * @return True si está disponible y False en caso contrario
	 * @throws IllegalStateException si domService es nulo
	 */
	public boolean isAvailable() {
<span class="fc" id="L56">		isNull(this.domService);</span>
<span class="fc" id="L57">		return this.domService.isAvailable();</span>
	}

	/**
	 * Enciende las luces de una casa usando el servicio
	 * DomoticaService
	 * 
	 * @param porcentajeIntensidad indica la intensidad de las luces en porcentaje
	 *                             decimal [0.0,100.0]
	 * @throws IllegalStateException    si domService es nulo
	 * @throws IllegalStateException    si domService no está habilitado
	 * @throws IllegalStateException    si las luces ya están encendidas
	 * @throws IllegalArgumentException si el porcentaje es menor que 0.0 o mayor
	 *                                  que 100.0
	 * 
	 * 
	 */
	public void encenderLuces(double intensidad) {
<span class="fc" id="L75">		isNull(this.domService);</span>
<span class="fc bfc" id="L76" title="All 2 branches covered.">		if (!isAvailable()) {</span>
<span class="fc" id="L77">			throw new IllegalStateException();</span>
		}
		try {
<span class="fc" id="L80">			int intensidadServicio = (int) intensidad;</span>
<span class="fc" id="L81">			this.domService.encenderLuces(intensidadServicio);</span>
<span class="fc" id="L82">		} catch (IllegalStateException e) {</span>
<span class="fc" id="L83">			throw e;</span>
<span class="fc" id="L84">		} catch (IllegalArgumentException e2) {</span>
<span class="fc" id="L85">			throw e2;</span>
		}

<span class="fc" id="L88">	}</span>

	/**
	 * Apaga las luces de una casa usando el servicio. La intensidad pasa a 0
	 * DomoticaService
	 * 
	 * @throws IllegalStateException si domService es nulo
	 * @throws IllegalStateException si domService no está habilitado
	 * @throws IllegalStateException si las luces ya están apagadas
	 * 
	 */
	public void apagarLuces() {
<span class="fc" id="L100">		isNull(this.domService);</span>
<span class="fc bfc" id="L101" title="All 2 branches covered.">		if (!isAvailable()) {</span>
<span class="fc" id="L102">			throw new IllegalStateException();</span>
		}
		try {
<span class="fc" id="L105">			this.domService.apagarLuces();</span>
<span class="fc" id="L106">		} catch (IllegalStateException e) {</span>
<span class="fc" id="L107">			throw e;</span>
		}
<span class="fc" id="L109">	}</span>

	/**
	 * Indica si las luces están encendidas (true) o apagadas (false) utilizando el
	 * servicio DomoticaService
	 * 
	 * @return El estado de las luces
	 * @throws IllegalStateException si heatingService es nulo
	 * @throws IllegalStateException si heatingService no está disponible
	 */
	public boolean lucesEncencidas() {
<span class="fc" id="L120">		isNull(this.domService);</span>
<span class="pc bpc" id="L121" title="1 of 2 branches missed.">		if (!isAvailable()) {</span>
<span class="nc" id="L122">			throw new IllegalStateException();</span>
		}
<span class="fc" id="L124">		return this.domService.lucesEncencidas();</span>
	}

	private void isNull(DomoticaService dom) {
<span class="pc bpc" id="L128" title="1 of 2 branches missed.">		if (dom == null) {</span>
<span class="nc" id="L129">			throw new IllegalArgumentException();</span>
		}
<span class="fc" id="L131">	}</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>